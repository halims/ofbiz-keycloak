apiVersion: v1
kind: ConfigMap
metadata:
  name: keycloak-ofbiz-filter
  namespace: ofbiz
binaryData:
  'keycloak-ofbiz-filter-0.1.0.jar': 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
data:
  patch-ofbiz-component.sh: |
    #!/bin/sh
    # Patch main ofbiz-component.xml with project ofbiz-component.xml
    # Usage: ./patch-ofbiz-component.sh /path/to/main/ofbiz-component.xml
    
    set -e
    PATCH_SRC="$(dirname "$0")/ofbiz-component.xml"
    PATCH_TARGET="$1"
    
    if [ -z "$PATCH_TARGET" ]; then
      echo "Usage: $0 /path/to/main/ofbiz-component.xml"
      exit 1
    fi
    
    if [ ! -f "$PATCH_SRC" ]; then
      echo "Project ofbiz-component.xml not found: $PATCH_SRC"
      exit 2
    fi
    
    if [ ! -f "$PATCH_TARGET" ]; then
      echo "Main ofbiz-component.xml not found: $PATCH_TARGET"
      exit 3
    fi
    
    # Backup original
    cp "$PATCH_TARGET" "$PATCH_TARGET.bak"
    
    # Simple patch: append project XML to main XML before closing tag
    sed -e '/<\/ofbiz-component>/e cat "$PATCH_SRC"' "$PATCH_TARGET.bak" | sed '/<\/ofbiz-component>/q' > "$PATCH_TARGET"
    echo "Patched $PATCH_TARGET with $PATCH_SRC"
  keycloak-config.xml: |
    <!-- Example Keycloak configuration for OFBiz integration -->
    <keycloak>
      <auth-server-url>http://auth.kc.svc.cluster.local:8080/realms</auth-server-url>
      <realm>ofbiz</realm>
      <client-id>ofbiz-client</client-id>
      <secret>your-client-secret</secret>
      <ssl-required>true</ssl-required>
    </keycloak>
